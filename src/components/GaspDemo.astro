---
import GsapHeader from './GsapHeader.astro';
---

<div class="pb-500px h-auto">
  <!-- header -->
  <div class="fixed inset-x-0 top-0 z-900">
    <GsapHeader />
  </div>
  <div class="bjXMPV pt-80px relative">
    <div class="bg"></div>
    <div class="content h-700px"></div>
  </div>
  <!-- animation4 ???? -->
  <div class="animation4 pt-20% flex h-1000px justify-center">
    <div class="pannel bg-white rounded-26px h-600px w-50%"></div>
  </div>
  <!-- animation1 -->
  <div class="fbVvgv pl-48px pr-48px mt-300px">
    <div class="corBop ml-auto mr-auto max-w-1248px">
      <div class="IYsGb">
        <div class="heroImg heroImg1 w-36%">
          <div class="endTransform">
            <div class="czSDRG">
              <img src="/public/community_pair_programming.webp" />
            </div>
          </div>
        </div>
        <div class="heroImg heroImg2 w-84%">
          <div class="endTransform">
            <div class="czSDRG">
              <img src="/public/community_remote_meet.webp" />
            </div>
          </div>
        </div>

        <div class="heroImg heroImg3 w-59%">
          <div class="endTransform">
            <div class="czSDRG">
              <img src="/public/7854.jpg_wh1200.jpg" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- animation2 -->
  <div class="iKbbjW mr-100px mt-200px">
    <div class="lgvkDR flex justify-end">
      <div class="ejnLld">
        <img
          class="cIhjxf block rounded-6px h-auto w-564px"
          src="/public/community_pair_programming.webp"
        />
      </div>
    </div>
  </div>
  <!-- animation3 -->
  <div class="animation3 pl-10px pr-30px overflow-scroll">
    <div class="imgsBox flex">
      <img src="/public/community_pair_programming.webp" />
      <img src="/public/community_remote_meet.webp" />
      <img src="/public/7854.jpg_wh1200.jpg" />
      <img src="/public/community_pair_programming.webp" />
      <img src="/public/community_remote_meet.webp" />
      <img src="/public/community_pair_programming.webp" />
      <img src="/public/community_remote_meet.webp" />
      <img src="/public/7854.jpg_wh1200.jpg" />
    </div>
  </div>
  <!-- animation5 -->
  <h1 class="gs_reveal mb-200px ml-200px mt-200px text-1.8em">
    Scroll down and up to see different reveal animations
  </h1>
  <div class="features">
    <div class="feature ipsSpacer_bottom_double ipsGrid ipsGrid_collapsePhone">
      <div
        class="gs_reveal featured-image-container ipsGrid_span5 gs_reveal_fromLeft"
      >
        <div class="card">
          <img width="479" src="https://picsum.photos/479/479?index=1" alt="" />
        </div>
      </div>

      <div class="ipsGrid_span7 ipsType_left">
        <h2 class="gs_reveal heading_large">
          Create amazing <strong>SVG</strong> animations
        </h2>
        <p class="gs_reveal">
          <a href="https://greensock.com/drawsvg/">DrawSVGPlugin</a> allows you
          to progressively reveal (or hide) SVG strokes to make them look like
          they're being drawn. <a href="https://greensock.com/morphsvg/">MorphSVGPlugin
                               </a
          > to Morph any SVG shape into any other shape smoothly regardless of
          the number of points in each. <a
            href="/docs/v3/Plugins/MotionPathPlugin"
                                        >MotionPathPlugin
                                        </a
          > allows you to easily move any object along a path.
        </p>
      </div>
    </div>

    <div class="feature ipsSpacer_bottom_double ipsGrid ipsGrid_collapsePhone">
      <div class="ipsGrid_span7 ipsType_right">
        <h2 class="heading_large gs_reveal">
          Supercharge immersive <strong>WebGL</strong> experiences
        </h2>
        <p class="gs_reveal">
          GreenSock is used in some of the most popular <a href="//threejs.org/">Three.js
                                                        </a
          > powered WebGL projects. Animate any object in a scene. <a
            href="https://greensock.com/PixiPlugin/"
                                                                   >PixiPlugin
                                                                   </a
          > makes animating <a href="//www.pixijs.com/">Pixi.js</a> objects with
          GSAP a breeze. Animate position, scale, color effects and more with
          all the power and control of GSAP and the rendering speed of Pixi.js.
        </p>
      </div>

      <div
        class="featured-image-container ipsGrid_span5 gs_reveal gs_reveal_fromRight"
      >
        <div class="card">
          <img width="479" src="https://picsum.photos/479/479?index=2" alt="" />
        </div>
      </div>
    </div>

    <div class="feature ipsSpacer_bottom_double ipsGrid ipsGrid_collapsePhone">
      <div
        class="featured-image-container ipsGrid_span5 gs_reveal gs_reveal_fromLeft"
      >
        <div class="card">
          <img width="479" src="https://picsum.photos/479/479?index=3" alt="" />
        </div>
      </div>

      <div class="ipsGrid_span7 ipsType_left">
        <h2 class="heading_large gs_reveal">
          Control performant <strong>Canvas</strong> animations
        </h2>
        <p class="gs_reveal">
          GSAP makes animating with Canvas even easier by providing an easier
          way to look and sequence animations. GSAP works great with <a
            href="//www.adobe.com/products/animate.html"
                                                                     >Adobe Animate
                                                                     </a
          > and <a href="//createjs.com/easeljs">EaseJS</a> through GSAP's <a
            href="https://greensock.com/easelplugin/"
                                                                           >EaselJSPlugin
                                                                           </a
          >.
        </p>
      </div>
    </div>

    <div class="feature ipsSpacer_bottom_double ipsGrid ipsGrid_collapsePhone">
      <div class="ipsGrid_span7 ipsType_right">
        <h2 class="heading_large gs_reveal">
          <strong>Award winning</strong> websites
        </h2>
        <p class="gs_reveal">
          GSAP is used on over 8,500,000 sites and over 1,000 sites featured on <a
            href="https://www.awwwards.com/websites/gsap-animation/"
            target="_blank"
                                                                                >Awwwards
                                                                                </a
          >. For some of our favorites, check out <a
            href="https://greensock.com/showcase/">our showcase
                                                  </a
          >.
        </p>
      </div>

      <div
        class="featured-image-container ipsGrid_span5 gs_reveal gs_reveal_fromRight"
      >
        <div class="card">
          <img width="479" src="https://picsum.photos/479/479?index=4" alt="" />
        </div>
      </div>
    </div>
  </div>
  <!-- animation6 -->
  <div class="cloud-platform-panel mt-200px h-450px w-1200px">
    <div class="home-screen-card home-screen-card1">
      <div class="card-text">xxxxxxxxxx</div>
      <div class="card-img-warp">
        <img
          src="//files.authing.co/authing-website/home/home-cloud-csdn-low.jpg"
        />
      </div>
    </div>
    <div class="home-screen-card home-screen-card2">
      <div class="card-text">yyyyyyyyy</div>
      <div class="card-img-warp">
        <img
          src="//files.authing.co/authing-website/home/home-cloud-wanke-low.jpg"
        />
      </div>
    </div>
    <div class="home-screen-card home-screen-card3">
      <div class="card-text">zzzzzzzzz</div>
      <div class="card-img-warp">
        <img
          src="//files.authing.co/authing-website/home/home-cloud-beijing-low.jpg"
        />
      </div>
    </div>
  </div>
</div>

<style lang="scss">
  /* animation1 */
  .fbVvgv {
    .IYsGb {
      transform-style: preserve-3d;
      perspective: 1200px;
      transform-origin: center center;
      transform: rotateY(0deg) rotateX(0deg) rotateZ(0deg);
      position: relative;
      width: 100%;
      aspect-ratio: 2 / 1;
      & * {
        transform-style: preserve-3d;
      }
      & .heroImg {
        position: absolute;
        pointer-events: none;
      }
      & .heroImg img {
        display: block;
        width: 100%;
        box-shadow:
          rgba(14, 16, 21, 0.3) 0px 10px 20px 0px,
          rgba(14, 16, 21, 0.2) 0px 3px 6px 0px;
      }
      .heroImg1 {
        .endTransform {
          transform: rotateY(-10deg) translateZ(0px) translateX(-2%)
            translateY(-10px) scale(1.07);
        }
        left: 67.0391%;
        top: 23.4261%;
      }
      .heroImg2 {
        .endTransform {
          transform: rotateY(10deg) translateZ(-100px) translateX(2%)
            scale(0.98);
        }
        left: -1.39665%;
        top: -1.46413%;
      }
      .heroImg3 {
        .endTransform {
          transform: rotateY(-5deg) translateZ(100px) translateX(-4%)
            translateY(-2%) scale(0.9);
        }
        left: 39.3156%;
        top: 43.9239%;
      }
    }
  }
  /* animation2 */
  .iKbbjW {
    width: 100%;
    aspect-ratio: 721 / 394;
    perspective: 1400px; //元素距离视图的距离
    position: relative;
    .lgvkDR {
      transform-origin: 100% 50% -300px;
      inset: 0px;
      .ejnLld {
        position: absolute;
        transform-style: preserve-3d;
        perspective: 1400px;
        aspect-ratio: 2660 / 1466;
        border-radius: 5px;
        box-shadow:
          rgba(14, 16, 21, 0.08) 0px 2px 10px 0px,
          rgba(14, 16, 21, 0.1) 0px 2px 7px 1px;
      }
    }
  }
  /* animation3 */
  .animation3 {
    img {
      width: 400px;
      height: 500px;
      border-radius: 24px;
      margin-right: 10px;
    }
  }
  /* header */
  .bjXMPV {
    .bg {
      --blur-amount: 0px;
      overflow: hidden;
      content: "";
      position: absolute;
      top: -1.5px;
      left: -1.5px;
      right: -1.5px;
      bottom: -1.5px;
      transform: translateZ(-1000px);
      perspective: none;
    }
    &::after {
      --blur-amount: 10px;
      background-image: url(https://www.plural.sh/images/gradients/gradient-bg-1.jpg);
      background-position: center top;
      background-size: 100%;
      background-repeat: no-repeat;
      background-color: rgb(23, 26, 33);
      filter: blur(4px);
      overflow: hidden;
      content: "";
      position: absolute;
      top: 0px;
      left: 0px;
      right: 0px;
      bottom: 0px;
    }
  }
  /* animation4 */
  .animation4 {
    background-color: rgba(0, 64, 255, 0.5);
    .pannel {
      // transform: matrix3d(1, 0, 0, 0, 0, 0.22495, 0.97437, -0.0015694, 0, -0.97437, 0.22495, -0.0003623, 0, 0, 0, 1);
      transform: perspective(620.831px) rotateX(77.0001deg); // perspective 指定了观察者与 z=0 平面的距离
    }
  }
  /* animation5 */
  .gs_reveal {
    opacity: 0;
    visibility: hidden;
    will-change: transform, opacity;
  }
  .feature {
    display: flex;
    align-items: center;
  }
  /* animation6 */
  .cloud-platform-panel {
    transform: translate(0px, -70px);
    .home-screen-card {
      width: 100%;
      height: 444px;
      border-radius: 24px;
      background: #215ae5;
      box-shadow: 0 4px 40px rgba(0, 0, 0, 0.25);
      -webkit-backdrop-filter: blur(20px);
      backdrop-filter: blur(20px);
      position: absolute;
      display: flex;
      justify-content: space-between;
      padding: 24px;
      background: url(//files.authing.co/authing-website/home/homePage_Rank_pitBg.png)
        0 100% no-repeat;
      background-size: 50%;
      background-color: #215ae5;
      img {
        width: 100%;
        height: 100%;
      }
    }
    .home-screen-card1 {
      z-index: 2;
      opacity: 1;
      transform: translate(0px, 0px);
    }
    .home-screen-card2 {
      box-shadow: rgba(0, 0, 0, 0.25) 0px 3.6px 36px 0px;
      background: rgb(11, 42, 153);
      opacity: 1;
      transform: scale(0.9, 0.9);
      z-index: 1;
      top: 60px;
      opacity: 1;
    }
    .home-screen-card3 {
      box-shadow: rgba(0, 0, 0, 0.25) 0px 2.88px 28.8px 0px;
      background: rgb(4, 24, 115);
      opacity: 1;
      transform: scale(0.8, 0.8);
      z-index: 0;
      top: 120px;
      opacity: 1;
    }
  }
</style>

<script>
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/all";

  gsap.registerPlugin(ScrollTrigger);
  // animation1
  const tl = gsap.timeline();
  const czSDRGTrigger = {
    trigger: ".fbVvgv",
    start: "top 80%",
    end: "bottom top",
    scrub: true,
  };
  const czSDRGTo = {
    scrollTrigger: czSDRGTrigger,
    opacity: 1,
    transform: "none",
    duration: 2,
  };

  tl.fromTo(
    ".heroImg1",
    {
      translateY: "-25%",
    },
    {
      scrollTrigger: {
        ...czSDRGTrigger,
      },
      translateY: "-1.59292%",
      duration: 3,
    }
  ).fromTo(
    ".heroImg3",
    {
      translateY: "15%",
    },
    {
      scrollTrigger: czSDRGTrigger,
      translateY: "-15%",
      duration: 3,
    }
  );

  tl.from(".czSDRG", {
    opacity: 0,
    transform: "translateZ(350px) translateZ(0px)",
  })
    .to(".heroImg2 .czSDRG", czSDRGTo)
    .to(".heroImg1 .czSDRG", czSDRGTo)
    .to(".heroImg3 .czSDRG", czSDRGTo);
  // animation2
  gsap.fromTo(
    ".lgvkDR",
    {
      opacity: 0,
      transform: "scale(0.85) rotateY(-15deg) translateZ(5px)",
    },
    {
      scrollTrigger: {
        trigger: ".lgvkDR",
        start: "top center",
        snap: 0.5,
        end: "+=100",
        // scrub: true,
      },
      opacity: 1,
      transform: "none",
      duration: 5,
    }
  );
  // animation3
  const imgs = gsap.utils.toArray(".imgsBox img");
  gsap.to(imgs, {
    xPercent: -67 * (imgs.length - 1),
    ease: "none",
    scrollTrigger: {
      trigger: ".animation3",
      pin: true, // 激活时固定触发器元件
      start: "top 30%",
      scrub: 1,
      snap: 1 / (imgs.length - 1), // 停止滚动后停留在特定的进度值
      // base vertical scrolling on how wide the container is so it feels more natural.
      end: () => "+=1000",
    },
  });
  // animation4
  tl.to(".pannel", {
    scrollTrigger: {
      trigger: ".animation4",
      start: "10% 100px",
      end: "50px 20%",
      scrub: true,
      pin: true,
    },
    perspective: "0",
    rotateX: "0deg",
    duration: 4,
  });
  // animation5
  function animateFrom(elem, direction) {
    direction = direction || 1;
    let x = 0;
    let y = direction * 100;
    if (elem.classList.contains("gs_reveal_fromLeft")) {
      x = -100;
      y = 0;
    } else if (elem.classList.contains("gs_reveal_fromRight")) {
      x = 100;
      y = 0;
    }
    elem.style.transform = `translate(${x}px, ${y}px)`;
    elem.style.opacity = "0";
    gsap.fromTo(
      elem,
      { x, y, autoAlpha: 0 },
      {
        duration: 1.25,
        x: 0,
        y: 0,
        autoAlpha: 1,
        ease: "expo",
        overwrite: "auto",
      }
    );
  }

  function hide(elem) {
    gsap.set(elem, { autoAlpha: 0 });
  }
  document.addEventListener("DOMContentLoaded", () => {
    gsap.utils.toArray(".gs_reveal").forEach((elem) => {
      hide(elem); // assure that the element is hidden when scrolled into view

      ScrollTrigger.create({
        trigger: elem,
        // markers: true,
        onEnter() {
          animateFrom(elem, undefined);
        },
        onEnterBack() {
          animateFrom(elem, -1);
        },
        onLeave() {
          hide(elem);
        }, // assure that the element is hidden when scrolled into view
      });
    });
  });
  // animation6
  tl.to(".home-screen-card1", {
    scrollTrigger: {
      trigger: ".cloud-platform-panel",
      start: "bottom 80%",
      end: "+=100px", // 滚动超过start点100px结束
      scrub: true,
    },
    opacity: 0,
    transform: "translate(0px, -440px)",
    duration: 3,
  })
    .to(".home-screen-card2", {
      scrollTrigger: {
        trigger: ".cloud-platform-panel",
        start: "bottom 76%",
        end: "+=100px", // 滚动超过start点100px结束
        scrub: true,
      },
      opacity: 0,
      transform: "translate(0px, -440px)",
      duration: 3,
    })
    .to(".home-screen-card3", {
      scrollTrigger: {
        trigger: ".cloud-platform-panel",
        start: "bottom 72%",
        end: "+=100px", // 滚动超过start点100px结束
        scrub: true,
      },
      transform: "translate(0px, -120px)",
      duration: 2,
    });
</script>
